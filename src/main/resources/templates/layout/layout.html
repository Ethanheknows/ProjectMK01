<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>MK01</title>
        <!-- favicon -->

        <link rel="shortcut icon" href="/images/favicon/favicon.ico" type="image/x-icon" />
        <!-- CSS -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <link rel="stylesheet" href="/css/bootstrap.css" />
        <link rel="stylesheet" href="/css/layout.css" />
        <link rel="stylesheet" href="/css/swiper-bundle.min.css" />
        <link rel="stylesheet" href="/css/coloris.css" />
        <!-- JS -->
        <script type="text/javascript" src="/js/jquery-3.6.4.min.js"></script>
        <script src="/js/bootstrap.bundle.min.js"></script>
        <script src="/js/swiper-bundle.min.js"></script>
        <script src="/js/gif.js"></script>
        <script src="/js/gsap/gsap.min.js"></script>
        <script src="/js/gsap/ScrollToPlugin.min.js"></script>
        <script src="/js/coloris.js"></script>
        <script
            src="https://t1.kakaocdn.net/kakao_js_sdk/2.1.0/kakao.min.js"
            integrity="sha384-dpu02ieKC6NUeKFoGMOKz6102CLEWi9+5RQjWSV0ikYSFFd8M3Wp2reIcquJOemx"
            crossorigin="anonymous"
        ></script>
        <script>
            Kakao.init("02e87f3e01d42befb911095e65782c0a"); // 사용하려는 앱의 JavaScript 키 입력
        </script>
    </head>
    <body>
        <header class="d-flex flex-wrap align-items-center justify-content-center py-3 mb-4 fixed-top myHeader">
            <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
                <li>
                    <a href="/" class="nav-link px-2 link-secondary">
                        <!-- prettier-ignored -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
                            <!-- prettier-ignored -->
                            <path
                                d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"
                            />
                            <!-- prettier-ignored -->
                        </svg></a
                    >
                </li>
            </ul>

            <div class="col-md-3 text-end" th:if="${session.board == null}">
                <a href="/genCustom" class="btn btn-outline-secondary me-2">Meme Customize</a>
                <a href="/login" class="btn btn-outline-primary me-2"> Login </a>
                <a href="/signup" class="btn btn-primary">Sign-up</a>
            </div>

            <div class="col-md-3 text-end" th:unless="${session.board == null}">
                <a href="/genCustom" class="btn btn-outline-secondary me-2">Meme Customize</a>
                <!-- <div class="col-md-3 text-end" th:if="${session.board.nickName} == manager and ${session.board.userId} == manager"> -->
                <a href="/info" class="btnInfo btn btn-primary me-2">
                    <span th:text="${session.board.nickName}">nickName</span>
                    <span> 님</span>
                </a>
                <a href="/logout" class="btn btn-outline-primary me-2">로그아웃</a>
                <a href="/insert" class="btn btn-outline-secondary" th:if="${session.board.nickName.equals('manager')}">##이미지 관리##</a>
            </div>
        </header>

        <main id="main">
            <div layout:fragment="contents"></div>
        </main>

        <!-- 모달 시작 -->
        <!-- comments modal -->
        <div class="modal fade" id="commentsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Comment</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>이미지에 대한 후기를 남기시겠습니까?</p>
                    </div>
                    <div class="modal-footer">
                        <a href type="button" class="btn btn-primary memo-modal-button-yes">YES</a>
                        <a type="button" class="btn btn-secondary memo-modal-button-no" data-bs-dismiss="modal">NO</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 이미지 클릭한 다음 나오는 모달 -->
        <div class="modal fade" id="imgModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <div class="clickedModalTitle"></div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col">
                                    <div style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff" class="swiper clickedSwiper">
                                        <div class="swiper-wrapper click-modal=slide" id="click-modal-slide"></div>
                                        <div id="prev-next-btn"></div>
                                    </div>
                                    <div thumbsSlider="" class="swiper clickedSwiperThumb thumbslide-container">
                                        <div class="swiper-wrapper" id="click-modal-slide-thumb"></div>
                                    </div>
                                </div>

                                <!-- 댓글 보는 곳 -->
                                <div class="col">
                                    <div class="d-flex row">
                                        <!-- 반복될 부분 -->

                                        <!-- 반복될 부분 -->
                                        <div>
                                            <table id="commentBoard"></table>
                                        </div>
                                    </div>
                                </div>

                                <div class="input-group">
                                    <textarea class="form-control" id="replyComment" rows="1" placeholder="댓글을 남겨주세요."></textarea>
                                    <button class="sendBtn" id="sendBtn"><span class="material-icons" id="button-addon2">send</span></button>
                                </div>

                                <!-- 댓글 쓰는 곳 -->
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="/gen" id="generator" class="btn btn-primary">Generate</a>
                        <button type="button" id="" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" id="memoModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" th:text="${title}">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p class="modal-body" th:text="${msg}">Modal body text goes here.</p>
                    </div>
                    <div class="modal-footer text-center">
                        <a type="button" class="btn btn-secondary memo-modal-button" data-bs-dismiss="modal">Close</a>
                        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" id="deleteModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">삭제하시겠습니까?</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="password" class="form-label">PASSWORD</label>
                            <input type="password" class="form-control" id="password" placeholder="password" name="password" />
                        </div>
                    </div>
                    <div class="modal-footer text-center">
                        <button type="button" class="btn btn-primary" id="btnDeleteConfirm" data-bs-dismiss="modal">CONFIRM</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>

        <script th:inline="javascript">
                              /*<![CDATA[*/
                                const msg = /*[[${msg}]]*/;
                                const title = /*[[${msg}]]*/;
                                const param = /*[[${param}]]*/;
                                const no = /*[[${param.no}]]*/;
                                const session = /*[[${session}]]*/;
                                const allImages = /*[[${allImages}]]*/;
                                const getAllcomment = /*[[${getAllcomment}]]*/;
                                const allcomments = /*[[${allcomments}]]*/;
                                const orderByHitImages = /*[[${orderByHitImages}]]*/;
                                const alluploads = /*[[${alluploads}]]*/;
                                const getUploadOrignalPath = /*[[${getUploadOrignalPath}]]*/;
                                const headerS = document.querySelector(".headerS");
                                const memoModal = new bootstrap.Modal("#memoModal");
                                const deleteModal = new bootstrap.Modal("#deleteModal");
                                const imgModal = new bootstrap.Modal("#imgModal")
                                const commentsModal = new bootstrap.Modal("#commentsModal")
                                const footerS = document.querySelector(".footerS");


                                function email_check(email) {

                                  var reg = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;

                                  return reg.test(email);

                                }




                                $(window).scroll(function () {

                                                    let timer;
                                  const y = $(window).scrollTop();

                                  if (y > 0) {
                                    $(".myHeader").addClass( 'on' );
                                      clearTimeout(timer2);
                                      gsap.to(".headerS", { opacity: 1, y: -1000, duration: 1 });
                                  } else if (y <= 0) {
                                      // $(".genCHeader").removeClass("off");
                                      $(".myHeader").removeClass('on');
                                      timer = setTimeout(function () {
                                          gsap.to(".headerS", {
                                              y: 0,
                                              duration: 2,
                                              // delay: 0.5,
                                          });
                                      }, 500);
                                  }


            // Trigger the scroll event to execute the code when the page loads





                                            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                                                $(".footerS").addClass("on");
                                                gsap.to(".footerS", {duration: 2, scrollTo: 100 })
                                                                   } else {
                                                     $(".footerS").removeClass("on");
                                                   }

                                   });
                                   $(window).trigger("scroll");

                                                            $(document).on("click", "#clickedImg", function (e) {
                                                              $("#commentBoard").empty();
                                                              for(i=0;i<allcomments.length;i++){
                                                                $("#commentBoard").append(`<div>`+allcomments[i].contents+`</div>`);

                                                              }
                                                              var src = $(this).find("img").attr("src");
                                                              var ogsrc = src.split("/")[3];
                                                              $(".clickedModalTitle").empty();
                                                              $("#click-modal-slide-thumb").empty();
                                                              $("#click-modal-slide").empty();
                                                              $("#prev-next-btn").empty();
                                                              $("#prev-next-btn").append(`   <div class="swiper-button-prev"></div>
                                                              <div class="swiper-button-next"></div>`);
                                                              makeNewSlider();
                                                              clickedSwiperOpen();

                                                              $('#click-modal-slide').append(`<div class="swiper-slide" id="main-image"><img src="` + src + `" alt=""/></div>`)
                                                              $('#click-modal-slide-thumb').append(`<div class="swiper-slide"><img src="` + src + `" alt=""/></div>`)

                                                              for(i = 0; i < allImages.length; i++) {
                                                                  if(allImages[i].original == ogsrc ){
                                                                $(".clickedModalTitle").append(`<h5>`+ allImages[i].title + `</h5>`)
                                                                  }

                                                              }

                                                              for (i = 0; i < getUploadOrignalPath.length; i++) {

                                                                if (getUploadOrignalPath[i].originalPath.split("/")[3] == ogsrc) {
                                                                  console.log(i + ogsrc);
                                                                  $("#click-modal-slide-thumb").append(
                                                                    `<div class="swiper-slide">
                                                                      <img src="/upload/upload/` +
                                                                      getUploadOrignalPath[i].renamed +
                                                                      `" alt="" />
                                                                    </div>`
                                                                  );

                                                                  $("#click-modal-slide").append(
                                                                    `<div class="swiper-slide">
                                                                      <img src="/upload/upload/` +
                                                                    getUploadOrignalPath[i].renamed +
                                                                    `" alt="" class="col-md-4"/>
                                                                    </div>`
                                                                  );
                                                                }
                                                              }

                                                              e.preventDefault();

                                                              console.log("이미지 클릭중===============");
                                                              imgModal.show();

                                                              $.when(
                                                                $.ajax({
                                                                type: "POST",
                                                                url: "/getAllCommets",
                                                                success: function(response) {
                                                                  $("#commentBoard").empty();
                                                                  $("#commentBoard").append(`<th class="fw-bold">닉네임</th>`);
                                                                  $("#commentBoard").append(`<th class="fw-bold">COMMENTS</th>`);
                                                                  $("#commentBoard").append(`<th class="fw-bold">DATE</th>`);
                                                                  for(i=0;i<response.length;i++){
                                                                    if(src==response[i].original && response[i].available==1){

                                                                      $("#commentBoard").append(`<tr id="comments-tr`+i+`"></tr>`);
                                                                      $(`#comments-tr`+i).append(`<td class="hidden" id="delNo">`+response[i].no+ `</td>`);
                                                                      $(`#comments-tr`+i).append(`<td>`+response[i].nickName+ `</td>`);
                                                                      $(`#comments-tr`+i).append(`<td>`+response[i].contents+ `</td>`);
                                                                      $(`#comments-tr`+i).append(`<td>`+response[i].regDate+ `</td>`);
                                                                      if(session.board!=null &&(session.board.nickName==response[i].nickName || session.board.userId=="manager")  ){
                                                                       console.log("a")
                                                                       $(`#comments-tr`+i).append(`<td id="del"><span style="cursor:pointer;" class="material-icons"> clear</span></td>`);
                                                                      }
                                                                      $("#category02").addClass("hidden");
                                                                    }
                                                                  }
                                                                  // 모달의 내용을 업데이트합니다.
                                                                  document.getElementById("replyComment").value = "";

                                                                }
                                                                }),
                                                                $.ajax({
                                                                url : "/hitProcess" ,
                                                                type : "post",
                                                                dataType : "json",
                                                                data : {"original" : ogsrc},
                                                                success : function(data){
                                                                if(data == 0){

                                                                }else{

                                                                  }
                                                                }
                                                                })
                                                                ).done(function() {
                                                                // 두 개의 ajax가 모두 성공적으로 실행되면 실행할 코드
                                                                });







                                                            });


                        $(document).on('click','#del',function(e){
                          var delId= this.parentNode.id
                          console.log(delId); // "comments-tr19"
                          var guest = this.parentNode.querySelector("#delNo").innerHTML;
                          console.log(guest);


                          $.ajax({
                            url : "/delReply" ,
                                type : "post",
                                dataType : "json",
                                data:{"no":guest},
                                success : function(data){


                                    }
                          })








                          $("#"+delId).addClass("hidden");

                        })

                      $(document).on('click','#sendBtn',function(e){
                        var nickName=""
                        var src=$(".modal-body").find("img").attr("src");
                        if(!session.board){
                          nickName="guest";
                        }
                        else{
                          nickName=session.board.nickName;
                        }
                        console.log($("#replyComment").val());

                        $.ajax({
                          url: "/updatereply",
                          type: "POST",
                          data: {
                          "contents":$("#replyComment").val(),
                          "nickName": nickName,
                          "original": src},
                          success: function(response) {

                            $("#commentBoard").empty();

                            $("#commentBoard").append(`<th class="fw-bold">닉네임</th>`);
                            $("#commentBoard").append(`<th class="fw-bold">COMMENTS</th>`);
                            $("#commentBoard").append(`<th class="fw-bold">DATE</th>`);
                            for(i=0;i<response.length;i++){
                              if(src==response[i].original && response[i].available==1){

                                $("#commentBoard").append(`<tr id="comments-tr`+i+`"></tr>`);
                                $(`#comments-tr`+i).append(`<td class="hidden" id="delNo">`+response[i].no+ `</td>`);

                                $(`#comments-tr`+i).append(`<td>`+response[i].nickName+ `</td>`);
                                $(`#comments-tr`+i).append(`<td>`+response[i].contents+ `</td>`);
                                $(`#comments-tr`+i).append(`<td>`+response[i].regDate+ `</td>`);
                                if(session.board!=null &&(session.board.nickName==response[i].nickName || session.board.userId=="manager")  ){
                                  console.log("a")
                                  $(`#comments-tr`+i).append(`<td id="del"><span style="cursor:pointer;" class="material-icons"> clear</span></td>`);
                                 }
                              }
                            }
                            // 모달의 내용을 업데이트합니다.
                            document.getElementById("replyComment").value = "";
                            },
                            error: function(xhr, status, error) {
                            console.log(xhr.responseText);
                            }
                        });

                      })





                      $(document).on('click','#clickTag',function(e){
                        var selectTag=$(this).attr("value");
                        const element = document.getElementById('category02');
                        console.log(element)

                        $(".swiper-slide").remove();

                        for(i = 0;i<allImages.length;i++){
                          var allTag= allImages[i].tag;

                                if(selectTag=="all"){
                                  //addclass hidden
                                  $("#category02").addClass("hidden");
                                  if (!orderByHitImages[i].original.includes("gif")) {

                                    $(".tag2").append(
                                      // prettier-ignored
                                      `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/jpg/` +
                                        orderByHitImages[i].original +
                                        `" alt="" /></a></div>`
                                    );
                                  }
                                      //$(".category02").addClass("hidden");
                                      if(!allImages[i].original.includes("gif")){

                                        $(".tag1").append(
                                            // prettier-ignored
                                            `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/jpg/` +
                                                allImages[i].original +
                                                `" alt="" /></a></div>`
                                                );
                                      }else{
                                        $(".tagGif").append(
                                            // prettier-ignored
                                            `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/gif/` +
                                                allImages[i].original +
                                                `" alt="" /></a></div>`
                                                );
                                            }

                              }else{

                                if (element.classList.contains('hidden')) {
                                  $("#category02").removeClass("hidden");
                                    }
                                    const source = document.getElementById('selectTag');
                                    source.innerHTML = "#"+selectTag;
                                    if (!orderByHitImages[i].original.includes("gif")) {

                                      $(".tag2").append(
                                        // prettier-ignored
                                        `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/jpg/` +
                                          orderByHitImages[i].original +
                                          `" alt="" /></a></div>`
                                      );
                                    }
                                      if(!allImages[i].original.includes("gif")){
                                        if(allTag.includes(selectTag)){
                                        $(".tag3").append(
                                          // prettier-ignored
                                          `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/jpg/` +
                                              allImages[i].original +
                                              `" alt="" /></a></div>`
                                              );
                                          }
                                          $(".tag1").append(
                                            // prettier-ignored
                                            `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/jpg/` +
                                                allImages[i].original +
                                                `" alt="" /></a></div>`
                                                );

                                      }else{

                                        if(allTag.includes(selectTag)){
                                        $(".tag3").append(
                                          // prettier-ignored
                                          `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/gif/` +
                                            allImages[i].original +
                                            `" alt="" /></a></div>`
                                        );}
                                        $(".tagGif").append(
                                              // prettier-ignored
                                          `<div class="swiper-slide"><a href="" id="clickedImg"><img src="/upload/gif/` +
                                              allImages[i].original +
                                                  `" alt="" /></a></div>`
                                              );
                                        }



                                    }


                                  }





                                 });








                                // $("#clickedImg").on("click",function(e){
                                //   e.preventDefault();
                                //   console.log("이미지 클릭중===============")
                                //   imgModal.show();
                                // });

                                if(msg){
                                  memoModal.show();

                                }
                                $("#btnDeleteAjax").on("click",function(e){

                                  //e.preventDefault();
                                  deleteModal.show();
                                  return false;
                                });



                                $("#generator").on("click",function(e){




                                  var src=$("#main-image").find("img").attr("src");
                                  const imageinfo = {
                                          src: src
                                  }
                                  localStorage.setItem("image-info", JSON.stringify(imageinfo));

                                  console.log("img======="+src);
                                  //e.preventDefault();
                                });




                                $(document).ready(function(){
                                  $(".nickName_confirm").on("focusout",function(){
                                    var id=$("#nickName").val();

                                    if(id==''||id.length==0){
                                      $('#nickName_div').html('<a" style="color:red">닉네임을 입력해 주세요.</a>:')
                                      nickError="닉네임을 입력해 주세요.";
                                      return false;
                                    }

                                    $.ajax({
                                      url : "/nickNameCheck" ,
                                          type : "post",
                                          dataType : "json",
                                          data : {"nickName" : $("#nickName").val()},
                                          success : function(data){
                                                  if(data == 0){
                                                    $('#nickName_div').html('<a">사용가능한 닉네임입니다.</a>:')
                                                  }else{

                                                    $('#nickName_div').html('<a" style="color:red">이미 사용중인 닉네임입니다.</a>:')

                                                  }
                                              }
                                    })
                                  })

                                  $(".nickName_modify").on("focusout",function(){
                                    var id=$("#nickName").val();

                                    if(id==''||id.length==0){
                                      $('#nickName_div').html('<a" style="color:red">닉네임을 입력해 주세요.</a>:')

                                      return false;
                                    }


                                    $.ajax({
                                      url : "/nickNameCheck" ,
                                          type : "post",
                                          dataType : "json",
                                          data : {"nickName" : $("#nickName").val()},
                                          success : function(data){
                                                  if(data == 0 ){
                                                    $('#nickName_div').html('<a">좋은 NICKNAME이시네요!</a>:')

                                                  }else if(id == session.board.nickName){
                                                    console.log(session.board.nickName)
                                                    $('#nickName_div').html('<a" >기존 사용하고 있는 닉네임입니다.</a>:')
                                                }
                                                  else{
                                                    console.log(session.board.nickName)

                                                    $('#nickName_div').html('<a" style="color:red">이미 사용중인 닉네임입니다.</a>:')
                                                    nickError="이미 사용중인 닉네임입니다."
                                                }
                                              }
                                    })
                                  })




                                  $(".id_confirm").on("focusout",function(){
                                    var id=$("#userId").val();

                                    if(id==''||id.length==0){
                                      $('#id_div').html('<a" style="color:red">아이디를 입력해 주세요.</a>:')

                                      return false;
                                    }
                                    if(id.length<5){
                                      $('#id_div').html('<a" style="color:red">아이디를 5글자 이상 입력해 주세요.</a>:')


                                      return false;
                                    }
                                    $.ajax({
                                      url : "/idCheck",
                                          type : "post",
                                          dataType : "json",
                                          data : {"userId" : $("#userId").val()},
                                          success : function(data){
                                                   console.log(data);

                                                  if(data == 0 ){
                                                    $('#id_div').html('<a">사용가능한 ID입니다.</a>:')

                                                  }else{
                                                    $('#id_div').html('<a" style="color:red">이미 사용중이거나 탈퇴한 ID입니다.</a>')

                                                }
                                              }
                                    })
                                  })




                                 // $(".id_modify").on("focusout",function(){
                                 //   var id=$("#userId").val();
            //
                                 //   if(id==''||id.length==0){
                                 //     $('#id_div').html('<a" style="color:red">아이디를 입력해 주세요.</a>:')
                                 //     idError="아이디를 입력해 주세요"
            //
                                 //     return false;
                                 //   }
                                 //   if(id.length<5){
                                 //     $('#id_div').html('<a" style="color:red">아이디를 5글자 이상 입력해 주세요.</a>:')
                                 //     idError="아이디를 5글자 이상 입력해 주세요."
            //
            //
                                 //     return false;
                                 //   }
                                 //   $.ajax({
                                 //     url : "/idCheck",
                                 //         type : "post",
                                 //         dataType : "json",
                                 //         data : {"userId" : $("#userId").val()},
                                 //         success : function(data){
                                 //                 if(data == 0 ){
                                 //                   idError=""
            //
                                 //                   $('#id_div').html('<a">사용가능한 ID입니다.</a>:')
                                 //                   console.log(session.board.userId)
                                 //                   console.log(id)
                                 //                   return true
                                 //                 }
                                 //                 //else if(id == session.board.userId){
                                 //                   //console.log(session.board.userId)
            //
                                 //                   //$('#id_div').html('<a">기존 사용하고 있는 아이디입니다.</a>:')
                                 //               //}
                                 //               else{
                                 //
            //
                                 //                   $('#id_div').html('<a" style="color:red">이미 사용중이거나 탈퇴한 ID입니다.</a>:')
                                 //                   return true
                                 //               }
                                 //             }
                                 //   })
                                 // })



                                  $(".userPw_confirm").on("focusout",function(){
                                    var id=$("#userPw").val();

                                    console.log(id);




                                    if(id==''||id.length==0){
                                      $('#userPw_div').html('<a"  style="color:red" id="pw_null">비밀번호를 입력해 주세요.</a>:')

                                      return false;
                                    }else{
                                      $('#userPw_div').html('<a" id="pw_null">비밀번호 입력이 완료되었습니다.</a>:')



                                      return false
                                    }


                                  })
                                  $(".userPw_confirm").on("focusout",function(){
                                    var pwchk=$("#userPwCheck").val();
                                    var pw=$("#userPw").val();



                                    if(pw!= pwchk){
                                      $('#userPwCheck_div').html('<a" style="color:red" id="pwchk_diff">비밀번호가 일치하지 않습니다.</a>:')


                                      return false

                                    }else{
                                      $('#userPwCheck_div').html('<a" id="pwchk_diff">비밀번호가 일치합니다.</a>:')
                                      pwckError=""

                                      return true

                                    }


                                  })




                                  $(".userPwCheck_confirm").on("focusout",function(){
                                    var pwchk=$("#userPwCheck").val();
                                    var pw=$("#userPw").val();



                                    if(pw!= pwchk){
                                      $('#userPwCheck_div').html('<a" style="color:red" id="pwchk_diff">비밀번호가 일치하지 않습니다.</a>:')


                                      return false

                                    }else{
                                      $('#userPwCheck_div').html('<a" id="pwchk_diff">비밀번호가 일치합니다.</a>:')
                                      pwckError=""

                                      return true

                                    }
                                      if(pwchk==''||pwchk.length==0){
                                        $('#userPwCheck_div').html('<a" style="color:red" id="pwchk_null">비밀번호를 입력해 주세요.</a>:')
                                        pwckError="비밀번호를 입력해 주세요."
                                      return false

                                      }else{
                                        $('#userPwCheck_div').html('<a" id="pwchk_null">비밀번호 입력이 완료되었습니다.</a>:')
                                           pwckError=""

                                      return true


                                      }




                                  })

                                  $(".email_confirm").on("focusout",function(){
                                    var userEmail=$("#userEmail").val();


                                    if(userEmail==''||userEmail.length==0){
                                      $('#email_div').html('<a" style="color:red" id="email_null">이메일을 입력해 주세요.</a>')
                                      return false
                                    }else{
                                      $('#email_div').html('<a" id="email_null">이메일 입력이 완료되었습니다.</a>')

                                    }

                                    if(!email_check(userEmail)){
                                      $('#email_div').html('<a" style="color:red" id="email_null">이메일 양식을 지켜서 입력해 주세요.</a>')
                                      return false

                                    }else{
                                      $('#email_div').html('<a" id="email_null">이메일 입력이 완료되었습니다.</a>')
                                      return false

                                    }
                                  })




                                })

                                $(".btnInfo").on("click",function(){
                                  console.log("uuuu");
                                  deleteModal.show();
                                  const pw = session.board.userPw;
                                  console.log(pw);
                                  $("#deleteModal .modal-title").text("비밀번호를 입력해 주세요.");
                                  $("#btnDeleteConfirm").on("click",function(e){
                                    if($("#password").val()!=pw){
                                      console.log("1실패")

                                      console.log("123123123")
                                      memoModal.show();
                                      $("#memoModal .modal-title").text("비밀번호를 오류");
                                      $("#memoModal .modal-body").text("비밀번호를 잘못 입력하셨습니다.");
                                      return false;
                                    }
                                    console.log("1차성공")
                                    $.ajax({
                                      url : "/deleteAccountProcess" ,
                                          type : "post",
                                          dataType : "json",
                                          data : {"nickName" : session.board.nickName,
                                                  "userId" : session.board.userId,
                                                  "userPw" : session.board.userPw
                                        },
                                          success : function(response){
                                            console.log("aaaaa");
                                            console.log(response);
                                            if(response.msg==="ok") {
                                                memoModal.show();
                                                $("#memoModal .modal-title").text("계정을삭제하였습니다.");
                                                $("#memoModal .modal-body").text("계정 삭제를 완료하였습니다.");
                                                $("#memoModal .memo-modal-button").on("click", function() {
                                                  location.href = "/";
                                                  });

                                            }else {
                                              memoModal.show();
                                              $("#memoModal .modal-title").text("계정삭제에 실패하였습니다.");
                                              $("#memoModal .modal-body").text("계정 삭제를 실패하였습니다. 다시 시도해주세요.");
                                            }
                                          }
                                    })




                                  })
                                });



                                // 모달 띄울때 맨 처음 사진으로 가게 하는 함수
                                function makeNewSlider() {

                                  const clickedSwiperThumb = new Swiper(".clickedSwiperThumb", {
                                    spaceBetween: 10,
                                    slidesPerView: 4,
                                    watchSlidesProgress: true,
                                  });

                                  const clickedSwiper = new Swiper(".clickedSwiper", {
                                    slidesPerView: 1,
                                    spaceBetween: 10,
                                    navigation: {
                                      nextEl: ".swiper-button-next",
                                      prevEl: ".swiper-button-prev",
                                    },thumbs: {                       //added
                                      swiper:clickedSwiperThumb,

                                      //added
                                  },

                                  });

                                  clickedSwiper.on('slideChange', function() {
                                    console.log('현재 슬라이더 인덱스:', clickedSwiper.activeIndex);
                                  });



                                  clickedSwiper.slideTo(0, 0, false)


                                }
                                function clickedSwiperOpen() {

                                    }
                                /*]]>*/
        </script>
    </body>
</html>
